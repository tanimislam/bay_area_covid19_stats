<h1 id="readme">README</h1>
<p>Hello world! This is my COVID-19 tracker. There is a git submodule, the <a href="https://github.com/nytimes/covid-19-data">NY Times COVID-19 repository</a>, that needs to be updated frequently to get the latest data. The easiest way to update is to run this command in the checked out repo,</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">git</span> -C covid-19-data pull origin master</span></code></pre></div>
<p>This is not nearly as sophisticated as what’s in <a href="https://ncov2019.live">ncov2019.live</a>, and described in <a href="https://www.newyorker.com/magazine/2020/03/30/the-high-schooler-who-became-a-covid-19-watchdog">this New Yorker article</a>.</p>
<p>I have made major changes in the functionality and implementation from the original commits, since commit <a href="https://github.com/tanimislam/covid19_stats/commit/78917dd20c43bd65320cf51958fa481febef4338">#78917</a> for instance.</p>
<ul>
<li><p>The API code has been refactored into the <code>engine</code> subdirectory, and is divided into three main submodules: <code>engine.core</code> provides the higher level API calls for processing the COVID-19 data; <code>engine.gis</code> provides the lower-level APIs to write out, read in, and process the raw GIS data provided mainly by the US Census Bureau; and <code>engine.viz</code> does the visualization part.</p></li>
<li><p>There is a single command line interface (CLI), <code>covid19_create_movie_or_summary.py</code>, that can do the following: summarizes US metropolitan statistical areas (MSA) and gives their latest COVID-19 statistics; makes movie animations of the COVID-19 cases and deaths, from first case to latest incident date, for a given MSA; and prints out summary plots, and incident data, of COVID-19 cases and deaths for the latest incident day.</p></li>
<li><p>The <code>testing</code> subdirectory contains <a href="https://jupyter.org">Jupyter Notebooks</a> that illuminate bits and pieces of this COVID-19 tracker’s functionality.</p></li>
<li><p>Some video output of the CLI is located in the <code>movies</code> subdirectory.</p></li>
</ul>
<p>Here is some output from using this COVID-19 tracker.</p>
<ul>
<li><p>The summary of COVID-19 statistics for the top 20 MSAs by estimated 2019 population.</p>
<table>
<thead>
<tr class="header">
<th>RANK ID</th>
<th>ENTIFIER NA</th>
<th>ME PO</th>
<th>PULATION FI</th>
<th style="text-align: left;">RST INC.</th>
<th style="text-align: left;">NUM DAYS</th>
<th style="text-align: left;">NUM CASES</th>
<th style="text-align: left;">NUM DEATHS</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1 ny</td>
<td>c NY</td>
<td>C Metro Area 19</td>
<td>,216,182 01</td>
<td style="text-align: left;">March 2020</td>
<td style="text-align: left;">50</td>
<td style="text-align: left;">308986</td>
<td style="text-align: left;">17731</td>
</tr>
<tr class="even">
<td>2 lo</td>
<td>sangeles LA</td>
<td>Metro Area 18</td>
<td>,711,436 25</td>
<td style="text-align: left;">January 2020</td>
<td style="text-align: left;">86</td>
<td style="text-align: left;">20173</td>
<td style="text-align: left;">808</td>
</tr>
<tr class="odd">
<td>3 ch</td>
<td>icago Ch</td>
<td>icago Metro Area 9,</td>
<td>458,539 24</td>
<td style="text-align: left;">January 2020</td>
<td style="text-align: left;">87</td>
<td style="text-align: left;">30653</td>
<td style="text-align: left;">1301</td>
</tr>
<tr class="even">
<td>4 da</td>
<td>llas Da</td>
<td>llas Metro Area 7,</td>
<td>573,136 09</td>
<td style="text-align: left;">March 2020</td>
<td style="text-align: left;">42</td>
<td style="text-align: left;">5200</td>
<td style="text-align: left;">138</td>
</tr>
<tr class="odd">
<td>5 ho</td>
<td>uston Ho</td>
<td>uston Metro Area 7,</td>
<td>066,141 04</td>
<td style="text-align: left;">March 2020</td>
<td style="text-align: left;">47</td>
<td style="text-align: left;">7073</td>
<td style="text-align: left;">125</td>
</tr>
<tr class="even">
<td>6 ba</td>
<td>yarea Ba</td>
<td>y Area 6,</td>
<td>860,207 31</td>
<td style="text-align: left;">January 2020</td>
<td style="text-align: left;">80</td>
<td style="text-align: left;">6272</td>
<td style="text-align: left;">210</td>
</tr>
<tr class="odd">
<td>7 dc</td>
<td>DC</td>
<td>Metro Area 6,</td>
<td>280,487 05</td>
<td style="text-align: left;">March 2020</td>
<td style="text-align: left;">46</td>
<td style="text-align: left;">15075</td>
<td style="text-align: left;">438</td>
</tr>
<tr class="even">
<td>8 mi</td>
<td>ami Mi</td>
<td>ami Metro Area 6,</td>
<td>166,488 06</td>
<td style="text-align: left;">March 2020</td>
<td style="text-align: left;">45</td>
<td style="text-align: left;">15992</td>
<td style="text-align: left;">467</td>
</tr>
<tr class="odd">
<td>9 ph</td>
<td>iladelphia Ph</td>
<td>iladelphia Metro Area 6,</td>
<td>102,434 06</td>
<td style="text-align: left;">March 2020</td>
<td style="text-align: left;">45</td>
<td style="text-align: left;">24201</td>
<td style="text-align: left;">1004</td>
</tr>
<tr class="even">
<td>10 at</td>
<td>lanta At</td>
<td>lanta Metro Area 6,</td>
<td>020,364 02</td>
<td style="text-align: left;">March 2020</td>
<td style="text-align: left;">49</td>
<td style="text-align: left;">9688</td>
<td style="text-align: left;">342</td>
</tr>
<tr class="odd">
<td>11 ph</td>
<td>oenix Ph</td>
<td>oenix Metro Area 4,</td>
<td>948,203 26</td>
<td style="text-align: left;">January 2020</td>
<td style="text-align: left;">85</td>
<td style="text-align: left;">2892</td>
<td style="text-align: left;">82</td>
</tr>
<tr class="even">
<td>12 bo</td>
<td>ston Bo</td>
<td>ston Metro Area 4,</td>
<td>873,019 01</td>
<td style="text-align: left;">February 2020</td>
<td style="text-align: left;">79</td>
<td style="text-align: left;">30399</td>
<td style="text-align: left;">1298</td>
</tr>
<tr class="odd">
<td>13 de</td>
<td>troit De</td>
<td>troit Metro Area 4,</td>
<td>319,629 10</td>
<td style="text-align: left;">March 2020</td>
<td style="text-align: left;">41</td>
<td style="text-align: left;">25200</td>
<td style="text-align: left;">2072</td>
</tr>
<tr class="even">
<td>14 se</td>
<td>attle Se</td>
<td>attle Metro Area 3,</td>
<td>979,845 21</td>
<td style="text-align: left;">January 2020</td>
<td style="text-align: left;">90</td>
<td style="text-align: left;">8651</td>
<td style="text-align: left;">492</td>
</tr>
<tr class="odd">
<td>15 mi</td>
<td>nneapolis Mi</td>
<td>nneapolis Metro Area 3,</td>
<td>640,043 06</td>
<td style="text-align: left;">March 2020</td>
<td style="text-align: left;">45</td>
<td style="text-align: left;">1626</td>
<td style="text-align: left;">106</td>
</tr>
<tr class="even">
<td>16 sa</td>
<td>ndiego Sa</td>
<td>n Diego Metro Area 3,</td>
<td>338,330 10</td>
<td style="text-align: left;">February 2020</td>
<td style="text-align: left;">70</td>
<td style="text-align: left;">2325</td>
<td style="text-align: left;">72</td>
</tr>
<tr class="odd">
<td>17 ta</td>
<td>mpa Ta</td>
<td>mpa Metro Area 3,</td>
<td>194,831 01</td>
<td style="text-align: left;">March 2020</td>
<td style="text-align: left;">50</td>
<td style="text-align: left;">1873</td>
<td style="text-align: left;">41</td>
</tr>
<tr class="even">
<td>18 de</td>
<td>nver De</td>
<td>nver Metro Area 2,</td>
<td>967,239 05</td>
<td style="text-align: left;">March 2020</td>
<td style="text-align: left;">46</td>
<td style="text-align: left;">5963</td>
<td style="text-align: left;">248</td>
</tr>
<tr class="odd">
<td>19 st</td>
<td>louis St</td>
<td>. Louis Metro Area 2,</td>
<td>803,228 07</td>
<td style="text-align: left;">March 2020</td>
<td style="text-align: left;">44</td>
<td style="text-align: left;">4559</td>
<td style="text-align: left;">178</td>
</tr>
<tr class="even">
<td>20 ba</td>
<td>ltimore Ba</td>
<td>ltimore Metro Area 2,</td>
<td>800,053 08</td>
<td style="text-align: left;">March 2020</td>
<td style="text-align: left;">43</td>
<td style="text-align: left;">5609</td>
<td style="text-align: left;">185</td>
</tr>
</tbody>
</table></li>
<li><p>The COVID-19 trends in cases and deaths for these 6 metropolitan areas through 20 APRIL 2020: SF Bay Area; Washington, DC; Richmond, VA; NYC; Los Angeles; and New Orleans.</p></li>
</ul>
<table>
<tbody>
<tr class="odd">
<td style="text-align: center;"><img width=100% src="figures/covid19_bayarea_cds_20042020.png"></td>
<td style="text-align: center;"><img width=100% src="figures/covid19_dc_cds_20042020.png"></td>
<td style="text-align: center;"><img width=100% src="figures/covid19_richmond_cds_20042020.png"></td>
</tr>
<tr class="even">
<td style="text-align: center;">SF Bay Area</td>
<td style="text-align: center;">Washington, DC</td>
<td style="text-align: center;">Richmond, VA</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><img width=100% src="figures/covid19_nyc_cds_20042020.png"></td>
<td style="text-align: center;"><img width=100% src="figures/covid19_losangeles_cds_20042020.png"></td>
<td style="text-align: center;"><img width=100% src="figures/covid19_neworleans_cds_20042020.png"></td>
</tr>
<tr class="even">
<td style="text-align: center;">NYC Metro</td>
<td style="text-align: center;">Los Angeles</td>
<td style="text-align: center;">New Orleans</td>
</tr>
</tbody>
</table>
<ul>
<li>GIF’d video animations of the COVID-19 trends in cases/deaths for NYC up to 20 APRIL 2020, Chicago up to 19 APRIL 2020, and Seattle up to 19 APRIL 2020.</li>
</ul>
<table>
<tbody>
<tr class="odd">
<td style="text-align: center;"><img width=100% src="figures/covid19_nyc_latest.gif"></td>
<td style="text-align: center;"><img width=100% src="figures/covid19_chicago_latest.gif"></td>
<td style="text-align: center;"><img width=100% src="figures/covid19_seattle_latest.gif"></td>
</tr>
<tr class="even">
<td style="text-align: center;">NYC Metro</td>
<td style="text-align: center;">Chicago</td>
<td style="text-align: center;">Seattle</td>
</tr>
</tbody>
</table>
<p>The remainder of this README has two sections: <em>GETTING STARTED</em> and <em>USING THE CLI</em>.</p>
<h2 id="getting-started">GETTING STARTED</h2>
<p>First clone this repo using the command</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1"></a><span class="fu">git</span> clone https://github.com/tanimislam/covid19_stats.git</span></code></pre></div>
<p>You will get the main directory structure, but you will notice that the <code>covid-19-data</code> submodule is empty. To populate it, run</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1"></a><span class="fu">git</span> submodule update --init --recursive</span></code></pre></div>
<p>The requirements are in the <code>requirements.txt</code>. You should be able to install these Python packages into your <em>user</em> Python library (typically at <code>~/.local/lib/python3.X/site-packages</code>) by running,</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1"></a><span class="ex">pip</span> install -r requirements.txt</span></code></pre></div>
<p>However, <a href="https://matplotlib.org/basemap/">Basemap</a> can be a bugbear to install. Here is what worked for me when installing on the Linux machine.</p>
<ol type="1">
<li>First, although <a href="https://matplotlib.org/basemap/">Basemap</a> will install, your Python shell (and hence your CLI) won’t be able to find it. This is almost certainly a bug in Basemap. Running <code>from mpl_toolkits.basemap import Basemap</code> won’t work. First, look for where <code>basemap</code> is installed. In my case, it was located at <code>~/.local/lib/python3.7/site-packages/basemap-1.2.1-py3.7-linux-x86_64.egg/</code>. The directory structure right below it looks like this,</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1"></a><span class="ex">EGG-INFO</span>  _geoslib.cpython-37m-x86_64-linux-gnu.so  _geoslib.py  mpl_toolkits  __pycache__</span></code></pre></div>
<ol start="2" type="1">
<li><code>cd</code> into <code>mpl_toolkits</code>. You should see a <code>basemap</code> subdirectory when you look in it.</li>
</ol>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1"></a><span class="ex">basemap</span>  __init__.py  __pycache__</span></code></pre></div>
<ol start="3" type="1">
<li>You should also have an <code>mpl_toolkits</code> library module installed locally. In my case it was <code>~/.local/lib/python3.7/site-packages/mpl_toolkits/</code>. Inside it looks like,</li>
</ol>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1"></a><span class="ex">axes_grid</span>  axes_grid1  axisartist  mplot3d  tests</span></code></pre></div>
<ol start="4" type="1">
<li>In the real <code>mpl_toolkits</code> directory, make a symbolic link to the <code>basemap</code> directory underneath, e.g., <code>~/.local/lib/python3.7/site-packages/basemap-1.2.1-py3.7-linux-x86_64.egg/</code>. Thus in the correct <code>mpl_toolkits</code> subdirectory, run, e.g.,</li>
</ol>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1"></a><span class="fu">ln</span> -sf ~/.local/lib/python3.7/site-packages/basemap-1.2.1-py3.7-linux-x86_64.egg/mpl_toolkits/basemap basemap</span></code></pre></div>
<p>If you have ve done everything correctly, its data structure will look like what is shown below, with a valid symbolic link to <code>basemap</code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1"></a><span class="ex">axes_grid</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="ex">axes_grid1</span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="ex">axisartist</span></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="ex">basemap</span> -<span class="op">&gt;</span> ~/.local/lib/python3.7/site-packages/basemap-1.2.1-py3.7-linux-x86_64.egg/</span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="ex">mplot3d</span></span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="ex">tests</span></span></code></pre></div>
<p>If you’re lucky, running <code>from mpl_toolkits.basemap import Basemap</code> will work without further issues.</p>
<p>Furthermore, just run this from the main directory,</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1"></a><span class="fu">git</span> -C covid-19-data pull origin master</span></code></pre></div>
<p>in order to get the latest COVID-19 data.</p>
<h2 id="using-the-cli">USING THE CLI</h2>
